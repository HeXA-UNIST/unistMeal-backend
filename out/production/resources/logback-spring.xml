<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- log 기록 절대 위치 설정 -->
    <timestamp key="BY_DATE" datePattern="yyyy-MM-dd"/>
    <property name="LOGS_ABSOLUTE_PATH" value="C:/Users/LG/unistMeal-backend/MealU_HeXA_Project/logs" />

    <property name="CONSOLE_LOG_PATTERN"
              value="[%d{yyyy-MM-dd HH:mm:ss}:%-3relative]  %clr(%-5level) %clr(${PID:-}){magenta} %clr(---){faint} %clr([%15.15thread]){faint} %clr(%-40.40logger{36}){cyan} %clr(:){faint} %msg%n"/>
    <property name="FILE_LOG_PATTERN"
              value="[%d{yyyy-MM-dd HH:mm:ss}:%-3relative] %-5level ${PID:-} --- [%15.15thread] %-40.40logger{36} : %msg%n"/>

    <!-- 콘솔(STDOUT) -->
<!--    <appender name="Console" class="ch.qos.logback.core.ConsoleAppender">-->
<!--        <layout class="ch.qos.logback.classic.PatternLayout">-->
<!--            <Pattern>${CONSOLE_LOG_PATTERN}</Pattern>-->
<!--        </layout>-->
<!--    </appender>-->

    <!-- 파일(FILE) -->
    <appender name="INFO_LOG" class="ch.qos.logback.core.rolling.RollingFileAppender">

        <file>./info_logs/${BY_DATE}.log</file> <!-- 파일을 저장할 경로를 정한다 -->
<!--        <filter class="ch.qos.logback.classic.filter.LevelFilter">-->
<!--            <level>INFO</level>-->
<!--            <onMatch>ACCEPT</onMatch> &lt;!&ndash; 해당 레벨만 기록한다. &ndash;&gt;-->
<!--            <onMismatch>DENY</onMismatch> &lt;!&ndash; 다른 수준의 레벨은 기록하지 않는다.(상위 레벨도 기록 안함), 상위 수준의 레벨에 대한 기록을 원하면 ACCEPT 로 하면 기록된다. &ndash;&gt;-->
<!--        </filter> &lt;!&ndash; 레벨별 필터링이 필요없을 경우 filter class 관련된 부분을 삭제하면 됨&ndash;&gt;-->
        <encoder>
            <pattern>[%d{yyyy-MM-dd HH:mm:ss}:%-3relative][%thread] %-5level %logger{35} - %msg%n</pattern> <!-- 해당 패턴 네이밍으로 현재 로그가 기록됨 -->
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>./was-logs/info.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern> <!-- 해당 패턴 네이밍으로 이전 파일이 기록됨 -->
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize> <!-- 한 파일의 최대 용량 -->
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>180</maxHistory> <!-- 한 파일의 최대 저장 기한 -->
        </rollingPolicy>
    </appender>



    <!-- log 레벨 설정 (logging.level.root=info)-->
<!--    <root level="info">-->
<!--        &lt;!&ndash;     참조할 appender 설정 - STDOUT &ndash;&gt;-->
<!--        <appender-ref ref="STDOUT" />-->
<!--    </root>-->

    <!-- log 레벨 설정 (org.springframework.web=debug)-->
    <logger name="ExcelService" level="debug">
        <appender-ref ref="INFO_LOG" />
    </logger>
    <logger name="AnnouncementService" level="debug">
        <appender-ref ref="INFO_LOG" />
    </logger>
    <logger name="ImageUrlsService" level="debug">
        <appender-ref ref="INFO_LOG" />
    </logger>
    <logger name="MealTableService" level="debug">
        <appender-ref ref="INFO_LOG" />
    </logger>



</configuration>